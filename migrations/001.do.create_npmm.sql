DROP TABLE IF EXISTS packages;
DROP TABLE IF EXISTS collections;
DROP TABLE IF EXISTS users;



CREATE TABLE users (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  email TEXT NOT NULL,
  password TEXT NOT NULL,
  UNIQUE(email)
);

CREATE TABLE collections (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
  collection_name TEXT NOT NULL,
);

CREATE TABLE packages (
  id SERIAL,
  collection INTEGER REFERENCES collections(id) ON DELETE SET NULL,
  name TEXT NOT NULL,
  version TEXT 
);